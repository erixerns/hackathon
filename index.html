<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Help 4 All</title>
<link href="home.css" type="text/css" rel="stylesheet"/>
</head>
<body id="body">
<div id="header">
  <div id="tabBar">
    <ul id="tabs">
      <table>
        <tr>
          <td><li class="item">Home</li></td>
          <td><li class="item">About</li></td>
          <td><li class="item">Contact</li></td>
        </tr>
      </table>
    </ul>
  </div>
</div>
<div id ="mainContentBody">
  <table id="bodyTable">
    <tr>
      <td style="height: 2px;"><div id="animateBox" style="{margin-top: 0px}"> </div></td>
    </tr>
    <tr align="center">
      <td style="height: 100px"><div id="contentBody">
          <div id="contentForeBody">
            <table style="width: 500px">
              <tr>
                <td class="tdTxt"><input type="text" name="state" placeholder="State" class="textField" id="stateField" onKeyUp="autocompleteState(this.value)"/></td><td id="stateAuto"></td>
              </tr>
              <tr style="width:700px">
                <td class="tdTxt"><input type="text" name="district" placeholder="District" class="textField" onKeyUp="autocompleteDis(this.value)" id="disField"/></td><td id="disAuto"></td>
              </tr>
            </table>
          </div>
        </div></td>
    </tr>
  </table>
        <div id="ajaxContent" style="height: 100px; width:100px">
      </div>
  <p id="test"></p>
</div>
<div id="footer">
  <p>Made for Moz://a Hackathon 2017, VIT Chennai</p>
</div>
<script>
	var screenWidth = ((screen.availWidth-200)).toString()+"px";
	document.getElementById("body").style.width=screenWidth;
	document.getElementById("header").style.width=screenWidth;
	document.getElementById("contentBody").style.width=screenWidth;
	document.getElementById("footer").style.width=screenWidth;
</script> 
<script>
var valid=true;
function autocompleteState(str) {
    if (str.length == 0) { 
        document.getElementById("stateAuto").innerHTML = "";
        return;
    } else {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("stateAuto").innerHTML = this.responseText;
            }
        };
        xmlhttp.open("GET", "autocorrect.php?key=" + str + "&col="+"state" , true);
        xmlhttp.send();
    }
}
function autocompleteDis(str) {
	valid=true;
    if (str.length == 0) { 
        document.getElementById("disAuto").innerHTML = "";
        return;
    } else {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("disAuto").innerHTML = this.responseText;
            }
        };
        xmlhttp.open("GET", "autocorrect.php?key=" + str + "&col="+"district" , true);
        xmlhttp.send();
    }
}
	
if(valid == true){

		var district = document.getElementById("disField").value;
	var state = document.getElementById("stateField").value;
	    if (district.length == 0) { 
        document.getElementById("ajaxContent").innerHTML = "";
    } else {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("ajaxContent").innerHTML = this.responseText;
            }
        };
        xmlhttp.open("GET", "sqldata.php?state=m&dis=u"/* + state + "&dis="+district */, true);
        xmlhttp.send();
    }
}
</script>
</body>
</html>
